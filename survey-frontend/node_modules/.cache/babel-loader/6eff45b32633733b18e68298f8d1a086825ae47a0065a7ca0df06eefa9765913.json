{"ast":null,"code":"import _objectSpread from\"/srv/SurveyInk/app/survey-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import dashboardBg from'../../assets/dashboardBg.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SurveySubmissions=()=>{const{id}=useParams();const[submissions,setSubmissions]=useState([]);const navigate=useNavigate();const[isRTL,setIsRTL]=useState(false);const fetchSubmissions=async()=>{try{const token=localStorage.getItem('access');const res=await fetch(\"https://survey-ink.com/survey/\".concat(id,\"/submissions/\"),{headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();console.log(data);setSubmissions(data);}catch(err){console.error('Error loading submissions:',err);}};const handleAction=async(submissionId,action)=>{try{const token=localStorage.getItem('access');const url=\"https://survey-ink.com/submission/\".concat(submissionId,\"/\").concat(action,\"/\");await fetch(url,{method:'POST',headers:{Authorization:\"Bearer \".concat(token)}});fetchSubmissions();// Refresh after action\n}catch(err){console.error(\"Error \".concat(action,\"ing submission:\"),err);}};useEffect(()=>{fetchSubmissions();},[id]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem',backgroundColor:'#f9fafb',fontFamily:\"'Segoe UI', sans-serif\",minHeight:'100vh',background:\"url(\".concat(dashboardBg,\")\"),backgroundAttachment:'fixed',backgroundRepeat:'no-repeat',backgroundSize:'100% 100%'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center',fontSize:'2.5rem',marginBottom:'2rem',color:'#35508C',fontWeight:'bold'},children:\"Survey Submissions\"}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto',backgroundColor:'#395692',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)',padding:'1rem',margin:'auto',maxWidth:'1000px'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#395692',color:'#fff'},children:[/*#__PURE__*/_jsx(\"th\",{style:headerStyle,children:\"User Email\"}),/*#__PURE__*/_jsx(\"th\",{style:headerStyle,children:\"Submitted At\"}),/*#__PURE__*/_jsx(\"th\",{style:headerStyle,children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[submissions.map((sub,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:index%2===0?'#ffffff':'#f9f9f9',transition:'background-color 0.3s ease',cursor:'default'},children:[/*#__PURE__*/_jsx(\"td\",{style:cellStyle,children:sub.freelancer_email}),/*#__PURE__*/_jsx(\"td\",{style:cellStyle,children:new Date(sub.submitted_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{style:cellStyle,children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/survey/\".concat(sub.survey_id,\"/submission/\").concat(sub.freelancer_id)),style:{backgroundColor:'#F19303',color:'#fff',border:'none',borderRadius:'6px',padding:'6px 12px',cursor:'pointer',fontWeight:'bold'},children:isRTL?'عرض':'View'})})]},sub.id)),submissions.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:_objectSpread(_objectSpread({},cellStyle),{},{textAlign:'center',color:'#888',fontSize:'1.1rem'}),children:\"No submissions yet.\"})})]})]})})]});};// Reusable styles\nconst headerStyle={padding:'1rem',textAlign:'left',fontWeight:'600',fontSize:'1rem',borderBottom:'2px solid #ddd'};const cellStyle={padding:'1rem',// borderBottom: '1px solid #eee',\ncolor:'#fff',fontSize:'1rem',background:'#395692'};const actionButton={padding:'0.4rem 0.8rem',border:'none',borderRadius:'6px',color:'#fff',fontWeight:'600',transition:'background-color 0.3s ease'};export default SurveySubmissions;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","dashboardBg","jsx","_jsx","jsxs","_jsxs","SurveySubmissions","id","submissions","setSubmissions","navigate","isRTL","setIsRTL","fetchSubmissions","token","localStorage","getItem","res","fetch","concat","headers","Authorization","data","json","console","log","err","error","handleAction","submissionId","action","url","method","style","padding","backgroundColor","fontFamily","minHeight","background","backgroundAttachment","backgroundRepeat","backgroundSize","children","textAlign","fontSize","marginBottom","color","fontWeight","overflowX","borderRadius","boxShadow","margin","maxWidth","width","borderCollapse","headerStyle","map","sub","index","transition","cursor","cellStyle","freelancer_email","Date","submitted_at","toLocaleDateString","onClick","survey_id","freelancer_id","border","length","colSpan","_objectSpread","borderBottom","actionButton"],"sources":["/srv/SurveyInk/app/survey-frontend/src/pages/Researcher/SurveySubmission.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams,useNavigate } from 'react-router-dom';\nimport dashboardBg from '../../assets/dashboardBg.png';\n\nconst SurveySubmissions = () => {\n  const { id } = useParams();\n  const [submissions, setSubmissions] = useState([]);\n  const navigate = useNavigate();\n  const [isRTL, setIsRTL] = useState(false);\n  \n  const fetchSubmissions = async () => {\n    try {\n      const token = localStorage.getItem('access');\n      const res = await fetch(`https://survey-ink.com/survey/${id}/submissions/`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      const data = await res.json();\n      console.log(data)\n      setSubmissions(data);\n    } catch (err) {\n      console.error('Error loading submissions:', err);\n    }\n  };\n\n  const handleAction = async (submissionId, action) => {\n    try {\n      const token = localStorage.getItem('access');\n      const url = `https://survey-ink.com/submission/${submissionId}/${action}/`;\n      await fetch(url, {\n        method: 'POST',\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      fetchSubmissions(); // Refresh after action\n    } catch (err) {\n      console.error(`Error ${action}ing submission:`, err);\n    }\n  };\n\n  useEffect(() => {\n    fetchSubmissions();\n  }, [id]);\n\n  return (\n    <div style={{\n      padding: '2rem',\n      backgroundColor: '#f9fafb',\n      fontFamily: \"'Segoe UI', sans-serif\",\n      minHeight: '100vh',\n      background: `url(${dashboardBg})`,\n      backgroundAttachment: 'fixed',\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: '100% 100%',\n    }}>\n      <h2 style={{\n        textAlign: 'center',\n        fontSize: '2.5rem',\n        marginBottom: '2rem',\n        color: '#35508C',\n        fontWeight: 'bold'\n      }}>\n        Survey Submissions\n      </h2>\n\n      <div style={{\n        overflowX: 'auto',\n        backgroundColor: '#395692',\n        borderRadius: '12px',\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',\n        padding: '1rem',\n        margin: 'auto',\n        maxWidth: '1000px'\n      }}>\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n          <thead>\n            <tr style={{ backgroundColor: '#395692', color: '#fff' }}>\n              <th style={headerStyle}>User Email</th>\n              <th style={headerStyle}>Submitted At</th>\n              <th style={headerStyle}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {submissions.map((sub, index) => (\n              <tr\n                key={sub.id}\n                style={{\n                  backgroundColor: index % 2 === 0 ? '#ffffff' : '#f9f9f9',\n                  transition: 'background-color 0.3s ease',\n                  cursor: 'default',\n                }}\n              >\n                <td style={cellStyle}>{sub.freelancer_email}</td>\n                <td style={cellStyle}>{new Date(sub.submitted_at).toLocaleDateString()}</td>\n                <td style={cellStyle}>\n\n                <button\n  onClick={() => navigate(`/survey/${sub.survey_id}/submission/${sub.freelancer_id}`)}\n  style={{\n    backgroundColor: '#F19303',\n    color: '#fff',\n    border: 'none',\n    borderRadius: '6px',\n    padding: '6px 12px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n  }}\n>\n  {isRTL ? 'عرض' : 'View'}\n</button>\n</td>\n              </tr>\n            ))}\n            {submissions.length === 0 && (\n              <tr>\n                <td colSpan=\"4\" style={{\n                  ...cellStyle,\n                  textAlign: 'center',\n                  color: '#888',\n                  fontSize: '1.1rem'\n                }}>\n                  No submissions yet.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\n// Reusable styles\nconst headerStyle = {\n  padding: '1rem',\n  textAlign: 'left',\n  fontWeight: '600',\n  fontSize: '1rem',\n  borderBottom: '2px solid #ddd',\n};\n\nconst cellStyle = {\n  padding: '1rem',\n  // borderBottom: '1px solid #eee',\n  color: '#fff',\n  fontSize: '1rem',\n  background:'#395692'\n};\n\nconst actionButton = {\n  padding: '0.4rem 0.8rem',\n  border: 'none',\n  borderRadius: '6px',\n  color: '#fff',\n  fontWeight: '600',\n  transition: 'background-color 0.3s ease',\n};\n\nexport default SurveySubmissions;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}