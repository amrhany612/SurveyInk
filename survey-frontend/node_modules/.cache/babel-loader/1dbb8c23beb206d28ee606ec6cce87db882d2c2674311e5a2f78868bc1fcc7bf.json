{"ast":null,"code":"import React,{useEffect}from\"react\";import{useSearchParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerifyEmail=()=>{const[searchParams]=useSearchParams();const navigate=useNavigate();useEffect(()=>{const uid=searchParams.get(\"uid\");const token=searchParams.get(\"token\");if(uid&&token){fetch(\"https://survey-ink.com/api/verify-email/\".concat(uid,\"/\").concat(token,\"/\")).then(response=>{if(!response.ok)throw new Error(\"Verification failed\");return response.json();}).then(()=>{// Redirect immediately with success message\nnavigate('/login?msg='+encodeURIComponent(\"Email verified successfully! You can now log in.\"),{replace:true});}).catch(()=>{// Redirect immediately with failure message\nnavigate('/login?msg='+encodeURIComponent(\"Verification failed. Please try again.\"),{replace:true});});}else{// Redirect if params are invalid\nnavigate('/login?msg='+encodeURIComponent(\"Invalid verification link.\"),{replace:true});}},[searchParams,navigate]);// Return null because we don't render anything here\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:\"2rem\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Verifying your email...\"}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n      .spinner {\\n        margin: 0 auto 1rem;\\n        width: 40px;\\n        height: 40px;\\n        border: 4px solid #ccc;\\n        border-top-color: #395692;\\n        border-radius: 50%;\\n        animation: spin 1s linear infinite;\\n      }\\n      @keyframes spin {\\n        to { transform: rotate(360deg); }\\n      }\\n    \"})]});};export default VerifyEmail;","map":{"version":3,"names":["React","useEffect","useSearchParams","useNavigate","jsx","_jsx","jsxs","_jsxs","VerifyEmail","searchParams","navigate","uid","get","token","fetch","concat","then","response","ok","Error","json","encodeURIComponent","replace","catch","style","textAlign","marginTop","children","className"],"sources":["E:/programming/SurveyInkServer/SurveyInk/survey-frontend/src/components/Verify_email.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\n\r\nconst VerifyEmail = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const uid = searchParams.get(\"uid\");\r\n    const token = searchParams.get(\"token\");\r\n\r\n    if (uid && token) {\r\n      fetch(`https://survey-ink.com/api/verify-email/${uid}/${token}/`)\r\n        .then(response => {\r\n          if (!response.ok) throw new Error(\"Verification failed\");\r\n          return response.json();\r\n        })\r\n        .then(() => {\r\n          // Redirect immediately with success message\r\n          navigate('/login?msg=' + encodeURIComponent(\"Email verified successfully! You can now log in.\"), { replace: true });\r\n        })\r\n        .catch(() => {\r\n          // Redirect immediately with failure message\r\n          navigate('/login?msg=' + encodeURIComponent(\"Verification failed. Please try again.\"), { replace: true });\r\n        });\r\n    } else {\r\n      // Redirect if params are invalid\r\n      navigate('/login?msg=' + encodeURIComponent(\"Invalid verification link.\"), { replace: true });\r\n    }\r\n  }, [searchParams, navigate]);\r\n\r\n  // Return null because we don't render anything here\r\nreturn (\r\n  <div style={{ textAlign: \"center\", marginTop: \"2rem\" }}>\r\n    <div className=\"spinner\" />\r\n    <p>Verifying your email...</p>\r\n    <style>{`\r\n      .spinner {\r\n        margin: 0 auto 1rem;\r\n        width: 40px;\r\n        height: 40px;\r\n        border: 4px solid #ccc;\r\n        border-top-color: #395692;\r\n        border-radius: 50%;\r\n        animation: spin 1s linear infinite;\r\n      }\r\n      @keyframes spin {\r\n        to { transform: rotate(360deg); }\r\n      }\r\n    `}</style>\r\n  </div>\r\n);\r\n};\r\n\r\nexport default VerifyEmail;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,eAAe,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhE,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,YAAY,CAAC,CAAGP,eAAe,CAAC,CAAC,CACxC,KAAM,CAAAQ,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,GAAG,CAAGF,YAAY,CAACG,GAAG,CAAC,KAAK,CAAC,CACnC,KAAM,CAAAC,KAAK,CAAGJ,YAAY,CAACG,GAAG,CAAC,OAAO,CAAC,CAEvC,GAAID,GAAG,EAAIE,KAAK,CAAE,CAChBC,KAAK,4CAAAC,MAAA,CAA4CJ,GAAG,MAAAI,MAAA,CAAIF,KAAK,KAAG,CAAC,CAC9DG,IAAI,CAACC,QAAQ,EAAI,CAChB,GAAI,CAACA,QAAQ,CAACC,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,qBAAqB,CAAC,CACxD,MAAO,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CACxB,CAAC,CAAC,CACDJ,IAAI,CAAC,IAAM,CACV;AACAN,QAAQ,CAAC,aAAa,CAAGW,kBAAkB,CAAC,kDAAkD,CAAC,CAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CACrH,CAAC,CAAC,CACDC,KAAK,CAAC,IAAM,CACX;AACAb,QAAQ,CAAC,aAAa,CAAGW,kBAAkB,CAAC,wCAAwC,CAAC,CAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAC3G,CAAC,CAAC,CACN,CAAC,IAAM,CACL;AACAZ,QAAQ,CAAC,aAAa,CAAGW,kBAAkB,CAAC,4BAA4B,CAAC,CAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAC/F,CACF,CAAC,CAAE,CAACb,YAAY,CAAEC,QAAQ,CAAC,CAAC,CAE5B;AACF,mBACEH,KAAA,QAAKiB,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAC,QAAA,eACrDtB,IAAA,QAAKuB,SAAS,CAAC,SAAS,CAAE,CAAC,cAC3BvB,IAAA,MAAAsB,QAAA,CAAG,yBAAuB,CAAG,CAAC,cAC9BtB,IAAA,UAAAsB,QAAA,4UAaS,CAAC,EACP,CAAC,CAER,CAAC,CAED,cAAe,CAAAnB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}